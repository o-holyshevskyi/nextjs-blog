---
title: 'Освоєння транзакцій SQL: потужність COMMIT і ROLLBACK в управлінні базами даних'
date: '2023-12-29'
tags: ['#SQL', '#DatabaseManagement', '#CodeExamples']
img: 'https://o-holyshevskyi.github.io/blog-pic/images/posts/sql_transactions_1.png'
locale: 'uk'
---

# Вступ
<a name="вступ" id="вступ" />

Транзакції SQL є фундаментальним аспектом керування базою даних, який відіграє вирішальну роль у підтримці цілісності даних. 
Серед ключових компонентів транзакцій оператор COMMIT виділяється як опора для забезпечення того, що зміни, внесені до бази даних, є постійними. 
У цій публікації блогу ми розглянемо, що таке SQL-транзакції та оператор COMMIT, проблеми, які вони вирішують, і як використовувати SQL-запити з транзакціями та без них.

Що таке транзакція SQL? 
У світі баз даних транзакція - це послідовність однієї або кількох операторів SQL, які виконуються як єдина одиниця роботи. 
Основною метою транзакцій є підтримка узгодженості та цілісності даних. 
Транзакція зазвичай включає кілька кроків, таких як читання даних, внесення змін і збереження цих змін у базі даних.

# Інструкція COMMIT
<a name="інструкція-commit" id="інструкція-commit" />

Оператор COMMIT є важливою частиною моделі транзакцій SQL. 
Коли оператор COMMIT виконується, він позначає кінець транзакції, підтверджуючи, що всі зміни, зроблені під час транзакції, 
є постійними та мають бути збережені в базі даних. Іншими словами, COMMIT — це те саме, що сказати: «*Я закінчив зі своїми змінами; будь ласка, зробіть їх постійними*».

# Проблеми, які вирішує COMMIT
<a name="проблеми-які-вирішує-commit" id="проблеми-які-вирішує-commit" />

1. Узгодженість даних: COMMIT гарантує успішне завершення транзакції перед внесенням змін. 
Якщо під час транзакції виникає помилка, COMMIT не виконується, а зміни відкочуються, зберігаючи узгодженість даних.
2. Контроль паралельності: у багатокористувацьких середовищах транзакції допомагають керувати одночасним доступом до даних. 
COMMIT гарантує, що зміни однієї транзакції не заважатимуть іншим, доки не буде чітко вказано це зробити.

# Використання COMMIT
<a name="використання-commit" id="використання-commit" />

Як використовувати SQL-запити з транзакціями та без них (COMMIT):

## Без транзакцій (режим автофіксації)
<a name="без-транзакцій-режим-автофіксації" id="без-транзакцій-режим-автофіксації" />

У багатьох системах баз даних оператори SQL за замовчуванням виконуються в режимі автоматичної фіксації. 
Кожен оператор розглядається як окрема транзакція, а зміни автоматично фіксуються в базі даних.

```SQL
-- Режим автоматичної фіксації (поведінка за замовчуванням)
INSERT INTO employees (id, name, salary) VALUES (1, 'John Doe', 50000);
-- Наведений вище оператор автоматично фіксується
```

## З транзакціями (Ручний COMMIT)
<a name="з-транзакціями-ручний-commit" id="з-транзакціями-ручний-commit" />

Розглянемо сценарій, коли вам потрібно переказати кошти між двома банківськими рахунками.
Використання транзакцій забезпечує атомарність операції, тобто або вся транзакція завершується успішно, або вона повністю відхиляється без внесення часткових змін.

```SQL
-- Початок транзакції
BEGIN TRANSACTION;

-- Зняття коштів з рахунку А
UPDATE accounts SET balance = balance - 1000 WHERE account_id = 'A';

-- Зачислення коштів на рахунок B
UPDATE accounts SET balance = balance + 1000 WHERE account_id = 'B';

-- Фіксація транзакції
COMMIT;
-- або відміна транзакції у разі помилок
-- ROLLBACK;
```
Переваги використання транзакцій:

1. Атомарність:
- Гарантує, що ряд інструкцій SQL розглядаються як єдина неподільна одиниця роботи.
- Або всі зміни зафіксовано, або жодні.
2. Консистенція:
- Зберігає цілісність і послідовність даних, оскільки зміни застосовуються як єдине ціле.
3. Ізоляція:
- Забезпечує певний рівень ізоляції між транзакціями, запобігаючи перешкодам між одночасними операціями.
4. Довговічність:
- Гарантії того, що здійснені транзакції є постійними та витримують системні збої.

# Висновок
<a name="висновок" id="висновок" />

Розуміння транзакцій SQL і ролі COMMIT має вирішальне значення для підтримки цілісності та узгодженості даних.
Незалежно від того, чи працюєте ви в режимі автоматичної фіксації чи керуєте транзакціями вручну, пам’ятаючи про ці концепції, ви гарантує надійність і надійність операцій з базою даних.